---
title: "The impact of vaccine lotteries on COVID-19 vaccination rates: Evidence from Poland"
author: "Benedikt Stelter"
date: "17/03/2023"
supervisor: "Prof. Achim Wambach, PhD / Sabrina Schubert"



output: 
   pdf_document: 
      template: main.tex
      keep_tex: true
      latex_engine: lualatex
      citation_package: biblatex


figsintext : yes


geometry: margin=1in
# References
biblio-style: apa #Select from https://www.overleaf.com/learn/latex/Biblatex_bibliography_styles
biblio-title: "References"

editor_options: 
  markdown: 
    wrap: 72
    
header-includes:
   - \usepackage{floatrow}
   - \floatsetup[figure]{capposition=top}
   - \usepackage{subfig}
   - \usepackage{amsmath}
   - \usepackage{tabu}

---

```{r echo=FALSE, message=FALSE, warning=FALSE, results=FALSE}
library(tidyverse)
library(readxl)
library(Synth)
library(SCtools)
library(augsynth)




#GDP
per_capita_gdp <- read_excel("C:\\Users\\bened\\Documents\\bachelor_thesis\\scripts_data\\gdp_per_capita.xlsx",sheet = "Blatt 1") 
per_capita_gdp <- per_capita_gdp[10:22,1:2]
names(per_capita_gdp)
names(per_capita_gdp)[names(per_capita_gdp) == "Daten abgefragt am 29/12/2022 15:37:21 von [ESTAT]"] <- "country"
names(per_capita_gdp)[names(per_capita_gdp) == "...2"] <- "gdpcapita20"


#Population density
pop_density <- read_excel("C:\\Users\\bened\\Documents\\bachelor_thesis\\scripts_data\\pop_density.xlsx",sheet = "Sheet 1") 
pop_density <- pop_density[9:21,1:2]
names(pop_density)
names(pop_density)[names(pop_density) == "Data extracted on 29/12/2022 16:30:19 from [ESTAT]"] <- "country"
names(pop_density)[names(pop_density) == "...2"] <- "popdensity19"


#Share of elderly
share_elderly <- read_excel("C:\\Users\\bened\\Documents\\bachelor_thesis\\scripts_data\\share_elderly.xlsx",sheet = "Blatt 1")
share_elderly <- share_elderly[9:21,1:2]
names(share_elderly)
names(share_elderly)[names(share_elderly) == "Daten abgefragt am 29/12/2022 15:52:45 von [ESTAT]"] <- "country"
names(share_elderly)[names(share_elderly) == "...2"] <- "elderly20"
share_elderly$elderly20 <- as.numeric(sub("%", "",share_elderly$elderly20,fixed=TRUE))/100


#Tertiary education
share_tertiary_ed <- read_excel("C:\\Users\\bened\\Documents\\bachelor_thesis\\scripts_data\\share_tertiary_ed.xlsx",
                                sheet = "Blatt 1")
share_tertiary_ed <- share_tertiary_ed[12:24,1:2]
names(share_tertiary_ed)
names(share_tertiary_ed)[names(share_tertiary_ed) == "Daten abgefragt am 29/12/2022 15:42:33 von [ESTAT]"] <- "country"
names(share_tertiary_ed)[names(share_tertiary_ed) == "...2"] <- "tertiary20"
share_tertiary_ed$tertiary20 <- as.numeric(sub("%", "",share_tertiary_ed$tertiary20,fixed=TRUE))/100


#Influenza
influenza_vacc_rates <- read_excel("C:\\Users\\bened\\Documents\\bachelor_thesis\\scripts_data\\influenza_vaccination_rates.xlsx",
                                sheet = "Blatt 1")
influenza_vacc_rates <- influenza_vacc_rates[9:21,1:2]
names(influenza_vacc_rates)
names(influenza_vacc_rates)[names(influenza_vacc_rates) == "Daten abgefragt am 29/12/2022 15:26:09 von [ESTAT]"] <- "country"
names(influenza_vacc_rates)[names(influenza_vacc_rates) == "...2"] <- "inflzvacc19"
influenza_vacc_rates$inflzvacc19 <- as.numeric(sub("%", "",influenza_vacc_rates$inflzvacc19,fixed=TRUE))/100
                  
                  
#Merging
df_list <- list(influenza_vacc_rates, per_capita_gdp, pop_density, share_elderly, share_tertiary_ed)
predictors <- df_list %>% reduce(full_join, by='country')
predictors$country <- c("Bulgaria", "Czechia", "Estonia", "Greece", "Croatia", "Latvia", "Lithuania", "Hungary", "Austria",
                                          "Poland", "Romania", "Slovenia", "Slovakia")


#Wellcome Global monitor
trst_science <- data.frame (country  = c("Bulgaria", "Czechia", "Estonia", "Greece", "Croatia", "Latvia", "Lithuania",
                                         "Hungary", "Austria", "Poland", "Romania", "Slovenia", "Slovakia"),
                            trstscinc20 = c(0.819,0.948,0.918,0.830,0.895,0.851,0.836,0.936,0.895,0.872,0.795,0.889,0.923))


#Merge again
sndmerge <- list(predictors, trst_science)
predictors <- sndmerge %>% reduce(full_join, by='country')
predictors$countryid <- c(1:13)



#Vaccination datset
vaccine <- read.csv("https://raw.githubusercontent.com/owid/covid-19-data/master/public/data/vaccinations/vaccinations.csv")
vaccine$date <- as.Date(vaccine$date)
donor_countries <- "Bulgaria|Czechia|Estonia|Greece|Croatia|Latvia|Lithuania|Hungary|Austria|Poland|Romania|Slovenia|Slovakia"
donor_pool <- vaccine[grep(donor_countries, vaccine$location), ]


#Plotting vaccinations in Poland (descriptive)


#Isolating for vaccinated per hundred
poland_lottery <- donor_pool[, c(1:3,11,12) ]
names(poland_lottery)[names(poland_lottery) == "location"] <- "country"
mrgefrst <- list(poland_lottery, predictors)
poland_lottery <- mrgefrst %>% reduce(full_join, by='country')

poland_lottery <- as.data.frame(poland_lottery)
poland_lottery$people_vaccinated_per_hundred <- as.numeric(sub("%", "",poland_lottery$people_vaccinated_per_hundred,fixed=TRUE))/100
names(poland_lottery)[names(poland_lottery) == "people_vaccinated_per_hundred"] <- "onedose"

poland_lottery$people_fully_vaccinated_per_hundred <- as.numeric(sub("%", "",poland_lottery$people_fully_vaccinated_per_hundred,fixed=TRUE))/100
names(poland_lottery)[names(poland_lottery) == "people_fully_vaccinated_per_hundred"] <- "twodoses"


#Remove 2020, 2022 and 2023
poland_lottery <- poland_lottery[!grepl("2023|2022|2020", poland_lottery$date), ]

#experiment:
setwd("C:\\Users\\bened\\Documents\\bachelor_thesis\\scripts_data")
source("C:\\Users\\bened\\Documents\\bachelor_thesis\\scripts_data\\kalman.R")

poland <- poland_lottery[grep("Poland", poland_lottery$country), ]
poland <- na_interpolation(poland)


##Plot poland (descriptive part)
source("ggplot_theme.R")
poland.plot <- poland


remaining <- poland_lottery[!grepl("Poland", poland_lottery$country), ]


estonia <- remaining[grep("Estonia", remaining$country), ]
estonia <- na_interpolation(estonia)
remaining <- remaining[!grepl("Estonia", remaining$country), ]


hungary <- remaining[grep("Hungary", remaining$country), ]
hungary <- na_interpolation(hungary)
remaining <- remaining[!grepl("Hungary", remaining$country), ]


lithuania <- remaining[grep("Lithuania", remaining$country), ]
lithuania <- na_interpolation(lithuania)
remaining <- remaining[!grepl("Lithuania", remaining$country), ]


romania <- remaining[grep("Romania", remaining$country), ]
romania <- na_interpolation(romania)
remaining <- remaining[!grepl("Romania", remaining$country), ]


slovenia <- remaining[grep("Slovenia", remaining$country), ]
slovenia <- na_interpolation(slovenia)
remaining <- remaining[!grepl("Slovenia", remaining$country), ]

slovakia <- remaining[grep("Slovakia", remaining$country), ]
slovakia <- na_interpolation(slovakia)
remaining <- remaining[!grepl("Slovakia", remaining$country), ]


croatia <- remaining[grep("Croatia", remaining$country), ]
croatia <- na_interpolation(croatia)
remaining <- remaining[!grepl("Croatia", remaining$country), ]


bulgaria <- remaining[grep("Bulgaria", remaining$country), ]
bulgaria <- na_interpolation(bulgaria)
remaining <- remaining[!grepl("Bulgaria", remaining$country), ]

mrgepol <- list(remaining, slovakia, bulgaria, croatia, slovenia, romania, lithuania, hungary, estonia, poland)

poland_lottery <- bind_rows(mrgepol)

poland_lottery <- subset(poland_lottery, date >= as.Date("2021-02-01") & date <= as.Date("2021-12-31"))


poland_lottery$date <- as.Date(poland_lottery$date)
poland_lottery$date2 <- as.numeric(poland_lottery$date)
poland_lottery$gdpcapita20 <- as.numeric(poland_lottery$gdpcapita20)
poland_lottery$popdensity19 <- as.numeric(poland_lottery$popdensity19)


country <- c("Austria", "Czechia", "Greece", "Latvia","Slovakia","Bulgaria","Croatia",
                  "Slovenia","Romania","Lithuania","Hungary","Estonia","Poland")
entrydate <- c(1995,2004,1981,2004,2004,2007,2013,2004,2007,2004,2004,2004,2004)

eu_accession <- data.frame(country, entrydate)

mrgeacc <- list(poland_lottery, eu_accession)
poland_lottery <- mrgeacc %>% reduce(full_join, by='country')


#"trstscinc20"

#SCM
dataprep.out <- dataprep(foo = poland_lottery, 
         predictors = c("gdpcapita20","inflzvacc19","popdensity19","tertiary20","elderly20","trstscinc20"),
         predictors.op = "mean",
         dependent = "twodoses", unit.variable = "countryid",
         time.variable = "date2", treatment.identifier = 10,
         controls.identifier = c(1,2,3,6,12,13),
         time.predictors.prior = c(18659:18771),
         time.optimize.ssr = c(18659:18771), time.plot = c(18659:18961),
         unit.names.variable = "country")

synth.out = synth(dataprep.out)



synth.tables <- synth.tab(
  dataprep.res = dataprep.out,
  synth.res = synth.out)



dataprep.out2 <- dataprep(foo = poland_lottery, 
         predictors = c("gdpcapita20","inflzvacc19","popdensity19","tertiary20","elderly20","trstscinc20","entrydate"),
         predictors.op = "mean",
         dependent = "onedose", unit.variable = "countryid",
         time.variable = "date2", treatment.identifier = 10,
         controls.identifier = c(1,2,3,6,12,13),
         time.predictors.prior = c(18659:18771),
         time.optimize.ssr = c(18659:18771), time.plot = c(18659:18961),
         unit.names.variable = "country")

synth.out2 = synth(dataprep.out2)


synth_data_out2 = data.frame(dataprep.out2$Y0plot%*%synth.out2$solution.w) 
date = as.numeric(row.names(synth_data_out2))
plot.df2 = data.frame(onedose=poland_lottery$onedose[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df2$synth = synth_data_out2$w.weight
plot.df2$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]

tdf <- generate.placebos(dataprep.out,synth.out, Sigf.ipop = 2)

year <- cont <- id <- Y1 <- synthetic.Y1 <- NULL
n<-tdf$n
t1 <- unique(tdf$df$year)[which(tdf$df$year == tdf$t1) - 1]
tr<-tdf$tr
names.and.numbers<-tdf$names.and.numbers
treated.name<-as.character(tdf$treated.name)
df.plot<-NULL

for(i in 1:n){
  a<-cbind(tdf$df$year,tdf$df[,i],tdf$df[,n+i],i)
  df.plot<-rbind(df.plot, a)
}
df.plot<-data.frame(df.plot)
df.plot$gap <- df.plot$V3-df.plot$V2
colnames(df.plot)<-c('date2','cont','tr','id','gap')
datedfplot <- rep(seq(as.Date("2021-02-01"),as.Date("2021-11-30"),1),6)
df.plot$date <- datedfplot

#SCM at start of lottery
dataprep.out.tc <- dataprep(foo = poland_lottery, 
         predictors = c("gdpcapita20","inflzvacc19","popdensity19","tertiary20","elderly20","trstscinc20"),
         predictors.op = "mean",
         dependent = "twodoses", unit.variable = "countryid",
         time.variable = "date2", treatment.identifier = 10,
         controls.identifier = c(1,2,3,6,12,13),
         time.predictors.prior = c(18659:18808),
         time.optimize.ssr = c(18659:18808), time.plot = c(18659:18961),
         unit.names.variable = "country")

synth.out.tc = synth(dataprep.out.tc)

synth_data_out.tc = data.frame(dataprep.out.tc$Y0plot%*%synth.out.tc$solution.w) 
date = as.numeric(row.names(synth_data_out.tc))
plot.df.tc = data.frame(twodoses=poland_lottery$twodoses[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df.tc$synth = synth_data_out.tc$w.weight
plot.df.tc$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]


#SCM one month prior
dataprep.out.tcb <- dataprep(foo = poland_lottery, 
         predictors = c("gdpcapita20","inflzvacc19","popdensity19","tertiary20","elderly20","trstscinc20"),
         predictors.op = "mean",
         dependent = "twodoses", unit.variable = "countryid",
         time.variable = "date2", treatment.identifier = 10,
         controls.identifier = c(1,2,3,6,12,13),
         time.predictors.prior = c(18659:18741),
         time.optimize.ssr = c(18659:18741), time.plot = c(18659:18961),
         unit.names.variable = "country")

synth.out.tcb = synth(dataprep.out.tcb)

synth_data_out.tcb = data.frame(dataprep.out.tcb$Y0plot%*%synth.out.tcb$solution.w) 
date = as.numeric(row.names(synth_data_out.tcb))
plot.df.tcb = data.frame(twodoses=poland_lottery$twodoses[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df.tcb$synth = synth_data_out.tcb$w.weight
plot.df.tcb$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]


#Leave one out analysis
#GDP
dataprep.out.gdp <- dataprep(foo = poland_lottery, 
                         predictors = c("inflzvacc19","popdensity19","tertiary20","trstscinc20","elderly20"),
                         predictors.op = "mean",
                         dependent = "twodoses", unit.variable = "countryid",
                         time.variable = "date2", treatment.identifier = 10,
                         controls.identifier = c(1,2,3,6,12,13),
                         time.predictors.prior = c(18659:18771),
                         time.optimize.ssr = c(18659:18771), time.plot = c(18659:18961),
                         unit.names.variable = "country")

synth.out.gdp = synth(dataprep.out.gdp)

synth_data_out.gdp = data.frame(dataprep.out.gdp$Y0plot%*%synth.out.gdp$solution.w) 
date = as.numeric(row.names(synth_data_out.gdp))
plot.df.gdp = data.frame(twodoses=poland_lottery$twodoses[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df.gdp$synth = synth_data_out.gdp$w.weight
plot.df.gdp$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]


#influenza
dataprep.out.infz <- dataprep(foo = poland_lottery, 
                            predictors = c("gdpcapita20","popdensity19","tertiary20","trstscinc20","elderly20"),
                            predictors.op = "mean",
                            dependent = "twodoses", unit.variable = "countryid",
                            time.variable = "date2", treatment.identifier = 10,
                            controls.identifier = c(1,2,3,6,12,13),
                            time.predictors.prior = c(18659:18771),
                            time.optimize.ssr = c(18659:18771), time.plot = c(18659:18961),
                            unit.names.variable = "country")

synth.out.infz = synth(dataprep.out.infz)

synth_data_out.infz = data.frame(dataprep.out.infz$Y0plot%*%synth.out.infz$solution.w) 
date = as.numeric(row.names(synth_data_out.infz))
plot.df.infz = data.frame(twodoses=poland_lottery$twodoses[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df.infz$synth = synth_data_out.infz$w.weight
plot.df.infz$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]


#popdensity
dataprep.out.pop <- dataprep(foo = poland_lottery, 
                            predictors = c("gdpcapita20","inflzvacc19","tertiary20","trstscinc20","elderly20"),
                            predictors.op = "mean",
                            dependent = "twodoses", unit.variable = "countryid",
                            time.variable = "date2", treatment.identifier = 10,
                            controls.identifier = c(1,2,3,6,12,13),
                            time.predictors.prior = c(18659:18771),
                            time.optimize.ssr = c(18659:18771), time.plot = c(18659:18961),
                            unit.names.variable = "country")

synth.out.pop = synth(dataprep.out.pop)

synth_data_out.pop = data.frame(dataprep.out.pop$Y0plot%*%synth.out.pop$solution.w) 
date = as.numeric(row.names(synth_data_out.pop))
plot.df.pop = data.frame(twodoses=poland_lottery$twodoses[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df.pop$synth = synth_data_out.pop$w.weight
plot.df.pop$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]


#tertiary
dataprep.out.tert <- dataprep(foo = poland_lottery, 
                            predictors = c("gdpcapita20","inflzvacc19","popdensity19","trstscinc20","elderly20"),
                            predictors.op = "mean",
                            dependent = "twodoses", unit.variable = "countryid",
                            time.variable = "date2", treatment.identifier = 10,
                            controls.identifier = c(1,2,3,6,12,13),
                            time.predictors.prior = c(18659:18771),
                            time.optimize.ssr = c(18659:18771), time.plot = c(18659:18961),
                            unit.names.variable = "country")

synth.out.tert = synth(dataprep.out.tert)

synth_data_out.tert = data.frame(dataprep.out.tert$Y0plot%*%synth.out.tert$solution.w) 
date = as.numeric(row.names(synth_data_out.tert))
plot.df.tert = data.frame(twodoses=poland_lottery$twodoses[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df.tert$synth = synth_data_out.tert$w.weight
plot.df.tert$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]


#trstscinc
dataprep.out.trst <- dataprep(foo = poland_lottery, 
                            predictors = c("gdpcapita20","inflzvacc19","popdensity19","tertiary20","elderly20"),
                            predictors.op = "mean",
                            dependent = "twodoses", unit.variable = "countryid",
                            time.variable = "date2", treatment.identifier = 10,
                            controls.identifier = c(1,2,3,6,12,13),
                            time.predictors.prior = c(18659:18771),
                            time.optimize.ssr = c(18659:18771), time.plot = c(18659:18961),
                            unit.names.variable = "country")

synth.out.trst = synth(dataprep.out.trst)

synth_data_out.trst = data.frame(dataprep.out.trst$Y0plot%*%synth.out.trst$solution.w) 
date = as.numeric(row.names(synth_data_out.trst))
plot.df.trst = data.frame(twodoses=poland_lottery$twodoses[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df.trst$synth = synth_data_out.trst$w.weight
plot.df.trst$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]


#elderly
dataprep.out.eld <- dataprep(foo = poland_lottery, 
                            predictors = c("gdpcapita20","inflzvacc19","popdensity19","tertiary20","trstscinc20"),
                            predictors.op = "mean",
                            dependent = "twodoses", unit.variable = "countryid",
                            time.variable = "date2", treatment.identifier = 10,
                            controls.identifier = c(1,2,3,6,12,13),
                            time.predictors.prior = c(18659:18771),
                            time.optimize.ssr = c(18659:18771), time.plot = c(18659:18961),
                            unit.names.variable = "country")

synth.out.eld = synth(dataprep.out.eld)

synth_data_out.eld = data.frame(dataprep.out.eld$Y0plot%*%synth.out.eld$solution.w) 
date = as.numeric(row.names(synth_data_out.eld))
plot.df.eld = data.frame(twodoses=poland_lottery$twodoses[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df.eld$synth = synth_data_out.eld$w.weight
plot.df.eld$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]




```



\chapter{Introduction}

\newpage\null\thispagestyle{empty}\newpage


\chapter{Background}



\section{Literature review}

\subsection{Incentives in public health}
Governments are facing public health challenges at every corner. But how can they motivate people to live healthier lives? 
Behavioural economics can offer several ways to influence the decisions of individuals, probably the least severe form are nudges.


Nudging is a concept mainly brought to the public through the work of \textcite{thaler_nudge_2008}. They define a nudge as an intervention that "alters people’s behavior in a predictable way without forbidding any options or significantly changing their economic incentives" (p. 6). Nudging can be applied in various ways, it is however often connected to lifestyle topics, such as nutrition and diet. For example, in an experiment in Denmark \parencite{friis_comparison_2017}, the aim was to promote the consumption of vegetables in the setting of a self-serving buffet, which included salad and other dishes in large bowls. As a nudge, the food environment was changed by arranging green plants and herbs around the food bowls. In a second experiment, salad was pre-portioned into smaller take-away bowls. The results showed that the intake of energy from vegetables of the participants can be increased by pre-portioning the salad.
Although many studies evaluating the impact of nudges find positive effects of the respective interventions, these results should be interpreted with caution, since a lot of studies, including \textcite{friis_comparison_2017}, were conducted in the lab and may therefore not be reproducible in a real-world setting \parencite{ledderer_nudging_2020}.


Besides nudging, policymakers could try to change economic incentives. Governments have been using taxation as a means of influencing the behaviour of individuals for a long time, for example in alcohol and tobacco policy. Both in developed and developing country, it has been shown that raising prices leads to reduced consumption of tobacco (\cite{yeh_effects_2017}; \cite{immurana_effects_2021}). 


Beyond taxation, policymakers could also use other financial incentives to motivate changes of individual behaviour to tackle public health challenges, such as (small) cash payments or lotteries. There have been many studies evaluating such possible schemes, typically using randomised control trials. Several meta-analyses found that such incentives can be successful in inducing behaviour changes. For example, \textcite{giles_effectiveness_2014} evaluated 16 studies on issues such as smoking cessation, health screenings, physical activity and vaccinations. The authors found that financial incentives are more effective than no intervention at encouraging healthy behaviour. This finding is also confirmed by \textcite{mantzari_personal_2015}, who evaluated 34 studies and additionally concluded that this effect is stronger for the most deprived individuals, thereby possibly reducing health inequalities.


There is also some literature on lotteries as an incentive in public health, apart from COVID-19 vaccine policy. \textcite{bjorkman_nyqvist_incentivizing_2018} find that the introduction of a lottery program reduced HIV incidence in Lesotho. Lotteries can also successfully increase cycling and walking activity (\cite{ciccone_using_2021}; \cite{patel_randomized_2018}) and  participation in chlamydia screenings \parencite{niza_vouchers_2014}.


\subsection{Incentives to increase COVID-19 vaccination rates}

In march 2020, when the COVID-19 pandemic struck the world, it was not foreseeable that vaccines would be available in just about nine months. When they were available and hailed as the possible end of the pandemic, it may not have been clear that rolling out vaccines was so difficult. In countries around the world, there was a considerable amount of vaccine hesitancy. Dealing with this hesitancy has led policymakers and researchers to thinking about how to increase vaccination rates, by means of vaccination mandates and passports, nudges, cash and non-cash prizes and lotteries.



A very widely used tool, especially in Europe and the US, were vaccination passports. The access to social gatherings/places (e.g. restaurants, bars, clubs, stadiums), international travel and quarantine regulations were subject to vaccination against COVID-19. Besides ethical concerns, for example potential disqualification of minorities from social life because of a historically higher distrust in government \parencite{gostin_digital_2021}, the evidence on the effectiveness of such regulations is mixed. A synthetic control analysis of six countries found that COVID passports were successful in increasing daily vaccinations in countries with lower than average vaccination rates. In more average countries (Germany and Denmark), such regulations were less successful \parencite{mills_effect_2022}. These cross-country comparisons should however be treated with caution, since there are large variations across countries when it comes to the extent of the use of COVID passports. 
While a comparison of Poland (very restricted use of COVID passport) and Lithuania (wide use of COVID passport) suggests a positive effect of passports on vaccination rates \parencite{walkowiak_covid-19_2021}, it has to be noted that COVID passport may also have negative effects on vaccine uptake, since frustration about reduced autonomy might lower willingness to get vaccinated \parencite{porat_vaccine_2021}.


Besides the carrot-and-stick approach, governments have also used smaller nudges and financial incentives, such as cash payments and non-cash rewards to increase COVID-19 vaccination rates.
Probably the most influential study to date on cash payments and nudges was carried out in Sweden \parencite{campos-mercade_monetary_2021}. Using a randomised control trial, the authors find that even "small" cash payments of around 24 US dollars can significantly increase vaccination rates, while small nudges could not increase vaccination rates. While some studies also suggest a measurable positive effect of cash payments on vaccination rates (\cite{wong_guaranteed_2022}; \cite{kluver_incentives_2021}; \cite{kim_vaccination_2021-1}), there is also evidence against this effect. In another study, the results indicated that neither behavioural nudges (text messages) nor cash payments could increase vaccination rates among the hesitant citizens \parencite{jacobson_can_2022}. \textcite{sprengholz_money_2021} also find that cash incentives do not increase the willingness to be vaccinated.



There is also a vast literature specifically on COVID-19 vaccine lotteries, also evaluating real-world lotteries. \textcite{dube_exploring_2022} analyse the effectiveness of a vaccine lottery in Québec (Canada) and find a relatively small impact on vaccination rates. A survey in Australia found that the vaccine lottery there was successful in increasing willingness to be vaccinated \parencite{jun_association_2022}. The majority of studies on COVID-19 vaccine lotteries however dealt with lotteries in US states. Studies on vaccine lotteries in Louisiana and Massachusetts found different effects. Whereas the lottery in Louisiana increased vaccine uptake \parencite{wang_moving_2023}, a vaccine lottery in Massachusetts did not significantly increase vaccination rates although prizes were higher \parencite{kim_did_2023}. There are also several papers investigating multiple state COVID-19 lotteries at once. All of these papers find that most, but not all of the lottery programs were successful in increasing vaccine uptake (\cite{robertson_are_2021}; \cite{acharya_implementation_2021}; \cite{fuller_assessing_2022}). 



A specific focus can be observed with respect to Ohio. There is a quite large number of studies evaluating the "Ohio Vax-A-Million" lottery, which was the first COVID-19 vaccine lottery in the US. In total, a majority of the reviewed literature casts a positive light on the efficacy of the lottery. While \textcite{mallow_covid-19_2022} find a positive effect of the lottery on vaccination rates, another study cannot support this view \parencite{walkey_lottery-based_2021}.
There have also been four studies evaluating the lottery using the SCM. These studies construct a synthetic Ohio out of a donor pool of other US states. Three of these studies find small positive effects of the lottery of vaccine uptake (\cite{brehm_ohio_2022}; \cite{barber_conditional_2022}; \cite{sehgal_impact_2021}) and one does not find a robust effect \parencite{lang_did_2022}.


So far, there has been one study dealing with the vaccine lottery analysed in this thesis. \textcite{kuznetsova_effectiveness_2022} shortly evaluate different vaccine incentives across Europe, including the Polish policy. By applying an interrupted time series analysis based on an ARIMA approach, the authors suggest a slight positive effect of this lottery. There has however not been a study dealing in detail with the Polish lottery yet.


\subsection{Theoretical background}
 Possibly to add

\section{Institutional background}


The COVID-19 policies in Poland (especially with respect to vaccines) can be considered as relatively "relaxed". Poland did not widely use the EU COVID passport with respect to social life (citation here). Instead, it was only used for travelling/entry into the country. Vaccination rates in Poland have been low compared to some western European countries, including neighbour Germany. In the context of eastern Europe, vaccination rates have however not been exceptionally low. Many eastern European countries experienced relatively low vaccination rates and a hesitancy to get vaccinated within their respective population. In the media, a general distrust into the government and a lack of educational campaigns \parencite{noauthor_polands_2021}  and a chaotic and conflicting communication by the government \parencite{wanat_polands_2021} have been cited as potential reasons of the low vaccine uptake in Poland. Many other eastern European countries also refrained from a large-scale use of COVID passports and the carrot-and-stick approach in general. Therefore, to increase vaccination rates, the only remaining options are campaigns/nudges and providing incentives. This has actually been implemented in several ways, e.g. Slovakia and Bulgaria also adopted lotteries at some point and Lithuania (?) provided cash incentives.


\renewcommand*{\arraystretch}{1.5}
\begin{table}[! htbp]\centering \caption{Prizes of Polish vaccine lottery}
\label{table:summarystat}
\begin{threeparttable}
\begin{tabularx}{10.5cm}{c|c|c}
\toprule\midrule
 & \thead{Cash prizes} & \thead{Non-cash prizes}\\ \midrule
Instant & \(13,000*500\) PLN & - \\
 & \(39,000*200\) PLN & \\ \hline
Weekly & \(60*50,000\) PLN & 720 electric scooters \\  \hline
Monthly & \(6*100,000\) PLN & 6 small vehicles \\ \hline
Main & \(2*1,000,000\) PLN & 6 middle class vehicles \\
\bottomrule
\end{tabularx}
\begin{tablenotes}
      \item \footnotesize Source: Service of the Republic of Poland
    \end{tablenotes}\end{threeparttable}
\label{table2}
\end{table}

\renewcommand*{\arraystretch}{1}


The empirical analysis will be based on a vaccine lottery implemented in Poland from July 1, 2021 to September 30, 2021. It was announced on May 25 , 2021 \parencite{charlish_poland_2021}. The policy had two main elements: A lottery for all adult fully vaccinated people (two doses) in Poland \parencite{service_of_the_republic_of_poland_national_2021} and a lottery-like monetary incentive scheme for municipalities \parencite{service_of_the_republic_of_poland_competitions_2021}. The main price of the lottery was a cash prize of 2 * one million zloty\footnote{At the time of announcement on 25/05/2021, this was equal to around 220,000€, with an exchange rate of around 0.22 PLN to EUR}, but it also included smaller monthly, weekly and daily cash prizes and non-cash prizes (cars and electric scooters) with a total volume of 140 million zloty, as depicted in table 2.1. Citizens were able to enter the lottery both online and by phone. It was organized by the state-owned polish lottery company \textit{Totalizator Sportowy}, which also operates other popular lotteries in Poland.

Poland's lottery can be seen as a mixture of different brands of lotteries. Especially in the US, state governments have focused on lotteries with high rewards and relatively low winning probabilities (e.g. Ohio, Massachusetts with prizes of one million USD). A completely different concept would be the use of relatively low prizes (e.g. below 1000 USD) with relatively high winning probabilities (citation/example here). The Polish policy included both relatively small prizes (instant prizes) but also quite large prizes (main/final draw), thereby combining the best of both worlds.

As part of the monetary incentive scheme for municipalities, the municipality with the highest percentage of the vaccinated in the country received two million zloty. Three other municipalities who had the highest percentage of the vaccinated in their comparison group\footnote{There were three groups: Municipalities with a population of up to 30,000, cities with a population of 30,000 - 100,000 and large cities with a population above 100,000.} received one million zloty each. The 500 quickest other municipalities reaching a vaccination rate of 67\%  won 100.000 zloty each. 

One obvious question with respect to the synthetic control is the time of intervention. Although the actual lottery started on July 1, we will choose the time of announcement as the point of intervention, since the time of being fully vaccinated is not relevant for the entry into the lottery. If the lottery has an effect, we will expect it to be observable from the time of announcement. On the other hand, if we were to set the intervention time at July 1, we might have the problem of a so-called anticipation effect, impacting the credibility of the synthetic control negatively. This will be further discussed in chapter 3.1. As a robustness check for the result we obtain, we will however also estimate a synthetic control using July 1 as the time of intervention.




\chapter{Methods and data}


\section{Synthetic control method}


The synthetic control method is a relatively new method in causal inference. It was first established by \textcite{abadie_economic_2003} in order to investigate the economic effects of terrorism in the basque country, further developed by \textcite{abadie_synthetic_2010} and summarized in \textcite{abadie_using_2021}. It has been applied widely in economics, but also in other (social) sciences such as political science. Its specific case of application are comparative case studies, where a specific case, e.g. a policy or intervention of any form are compared to another case, for example without a similar policy (?). One idea in the context of comparative case studies is difference-in-difference. It might be straightforward to use matching to find the closest/most similar unit to the treated unit and take this as a control, allowing to estimate the average treatment effect of the policy by simply taking the difference (citation for matching). Finding a single unit which matches well might however in many cases be difficult, especially when making cross-country comparisons. The synthetic control method comes into play here and extends the difference-in-difference method. The very basic idea is to create a synthetic control unit as a combination of multiple control countries, to then estimate the average treatment effect (ATE) of the policy/intervention. For instance, it has been used to evaluate the effects of European integration \parencite{campos_institutional_2019} or the effect of natural disasters on economic growth \parencite{cavallo_catastrophic_2013}, by constructing synthetic control countries without European integration or natural disasters. 


\subsection*{Requirements}

There are some important requirements that need to be fulfilled, in order to obtain a valid and interpretable synthetic control. These have been outlined in detail by \textcite{abadie_using_2021} along with the formal definition and the inference.
The first one is that the evaluated policy/intervention has a sufficiently large effect. When the effect of an intervention is too small, it may not be possible to distinguish this effect from other shocks to the outcome variable. Additionally, the volatility of the outcome variable should not be too high, to prevent over-fitting.

The second one is that there exists a suitable comparison/control group. Countries that are also subject so similar interventions or other shocks to the outcome variable in the given time frame should be excluded from the donor pool. What this means for the analysis in this thesis is outlined in section 3.1. Furthermore, we should try to select countries that are not too different from the treated country for the donor pool, to prevent interpolation bias(cite or write about interpolation bias). 

Another important requirement is that there is no anticipation effect, so that citizens do not anticipate the enactment of a policy. If there were an anticipation, we would expect our synthetic control to become biased and not useful for estimating the causal effect of the treatment. This should however not be expected as a problem in the Polish lottery application, since there is no possible reason for anticipation (there were no prior lotteries in Europe and no rumors about the lottery before the announcement (check again)). This will be picked up again in chapter 4, as a robustness check of the obtained synthetic control.

Lastly, it is crucial that we do not have any spillover effects on untreated units. If this were the case, the lottery in Poland would have effects on vaccination rates of donor pool countries. This requirement should however be fulfilled in this application, there is at least no possible theoretical argument for such a relationship.
The fulfillment of these assumptions/requirements will be further discussed in section 5.


\subsection*{Formal definition}

What we observe is some outcome variable \(Y_{jt}\) for \(J + 1\) units from \(t=1\) to \(T\). The first unit (\(j = 1\)) is the treated unit for \(t>T_{0}\) while all other units are untreated units. The intervention (in this analysis the announcement of the lottery) occurs at \(T_{0}+1\), meaning that there are \(T_{0}\) pre-intervention time periods. We also observe \(k\) predictors, which include the pre-intervention outcome variable and additional covariates: \(X_{1j},...,X_{kj}\). These can be summarised by the vectors \(\mathbf{X}_{j}=(X_{1j},X_{2j},...,X_{kj})'\) for units \(j=1,...,J + 1\). It therefore follows that the \((k\times J)\) matrix \(\mathbf{X}_{0}=(\mathbf{X}_{2},\mathbf{X}_{3},...,\mathbf{X}_{J + 1})\) captures all the predictors of the untreated units\footnote{\(\mathbf{X}_0=
\begin{bmatrix}
X_{12} & X_{13} & \dots & X_{1J+1}\\
X_{22} & X_{23} & \dots & X_{2J+1}\\
\vdots & \vdots & \ddots & \vdots\\
X_{k2} & X_{k3} & \dots & X_{kJ + 1}
\end{bmatrix}\)}.


The average treatment effect (causal effect) is defined as the difference between the potential outcome of the treated unit with intervention, which can be defined as $Y_{1t}^{I}$, and its potential outcome without the intervention, \(Y_{1t}^{N}\):
\begin{equation}
\tau_{1t}=Y_{1t}^{I}-Y_{1t}^{N}\; \; \text{for}\; \; t>T_{0}
\end{equation}
By definition, the outcome with intervention is known and the outcome without intervention is hypothetical for \(t>T_{0}\) for the treated unit. Therefore, to estimate the causal effect, it is sufficient to estimate \(Y_{1t}^{N}\). How can this problem be solved? By \textcite{abadie_economic_2003}, the SCM proposes to use a weighted average of donor pool units as a synthetic control. The synthetic control is therefore defined as:
\begin{equation}
\hat{Y}_{1t}^{N}=\sum_{j=2}^{J+1} w_{j}Y_{jt}
\end{equation}
The weights \(\mathbf{W}=(w_{2},w_{3},...,w_{J+1})'\) are chosen, such that the synthetic control matches as closely as possible the pre-intervention path of the predictors of the outcome variable for the treated unit. Therefore the weights have to be chosen so that they minimize this difference. The optimal weights \(\mathbf{W}^{\star}=(w_{2}^{\star},w_{3}^{\star},...,w_{J+1}^{\star})'\) solve:
\begin{equation}
\mathbf{W}=\text{arg}\; \min_{\mathbf{w}:w_{j}\in[0,1],\sum_{j=2}^{J+1} w_{j}=1}\vert\vert\mathbf{X}_{0}\mathbf{W}-\mathbf{X}_{1}\vert\vert
\end{equation}

(Potentially include factor model)
This is subject to the weights being non-negative and summing up to one, an important assumption in the classic SCM. This assumption can be relaxed to allow for non-negative weights, in this thesis we will however keep it. We can therefore simply estimate the average treatment effect from (3.1) using these weights:
\begin{equation}
\hat{\tau}_{1t}=Y_{1t}^{I}-\sum_{j=2}^{J+1} w_{j}^{\star}Y_{jt}\; \; \text{for}\; \; t>T_{0}
\end{equation}



\subsection*{Inference}

Based on \textcite{abadie_synthetic_2010}, the most common way of inference in synthetic control is using permutation through the use of placebo effects. A synthetic control unit is constructed for all the untreated countries in the control group, as if there was a treatment for these countries. If the magnitude of the effect for the actually treated unit is extreme compared to the placebo effects, the effect can be regarded as significant. In order to do this analysis, the gaps between the synthetic control and the actual outcome can be plotted for all selected countries, in order to visually compare the size of the effects. One possible problem of this concept might be that it could possibly be difficult to obtain a good pre-treatment fit for all units in the donor pool, especially with a relatively small donor pool. Additionally, this way of constructing inference is in some sense "blurry", since it does not rely on quantitative measure. 

A possibility of quantification is a test statistic which measures the ratio of the post-intervention fit relative to the pre-intervention fit (possibly cite 2010 abadie here). The root mean squared prediction error of the synthetic control is then defined as: 
\begin{equation}
R_{j}(t_{1},t_{2}) =(\frac{1}{t_{2}-t_{1}+1}\sum_{t=t_{1}}^{t_{2}}(Y_{jt}-\hat{Y}_{jt}^{N})^2)^\frac{1}{2}
\end{equation}
From there it is possible to compute \(r_{j}\), which measures the quality of the fit in the post-intervention period compared to pre-intervention and is given by the ratio of the post-intervention RMSPE and pre-intervention RMSPE:
\begin{equation}
r_{j}=\frac{R_{j}(T_{0}+1,T)}{R_{j}(1,T_{0})}
\end{equation}
It is then possible to compute a p-value for the permuted test:
\begin{equation}
p=\frac{1}{J+1}\sum_{j=1}^{J+1}I_{+}(r_{j}-r_{1})
\end{equation}
where \(I_{+}(\cdot)\) is an indicator function that returns one for non-negative arguments and zero otherwise.


\section{Data}

First, we will estimate an RDD model to estimate the effect of the lottery on COVID-19 cases in Poland, similar to the analysis by \textcite{kuznetsova_effectiveness_2022}. For this, time series data on COVID-19 cases by "Our world in data" will be utilized. 

In the main synthetic control analysis, the impact of the policy on the vaccination rates will be investigated. Data for the outcome variable vaccination rate (both one vaccination and fully vaccinated) is taken from a data set created by "Our world in data" \parencite{mathieu_global_2021}. This data set is a collection of vaccination rates and other information about vaccinations from all countries of the world, coming directly from the respective government/government agency. If the data is provided by the governments, it can give us a daily time-series of vaccination rates around the world. 


One of the most important aspects in the application of SCM is the choice of the donor pool. As outlined in 3.1, the treated country should not be an outlier compared to the control countries. It is therefore sensible to select countries that are similar to Poland, both in general and with respect to vaccination rates. Therefore, twelve central/eastern European countries with sufficient data availability (AT, BG, CZ, EE, GR, LV, LT, HR, HU, RO, SI, SK) are initial candidates for the donor pool. From this list, several countries are dropped who experienced similar interventions or shocks to the vaccination rate in the given time frame. Greece (cash incentive of 150€ for young people), Czechia (holiday incentive), Austria (need to find a reason here), Lithuania (cash incentive + other incentives), Romania (cash and lottery incentive). Estonia, Czechia and Slovenia implemented some small incentive schemes for doctors and state employees, these are however not considered as a big enough shock to vaccination rates and Estonia, Czechia and Slovenia will not be dropped. Croatia and Hungary are removed because of too many missing values, since a sensible trend can not be constructed using interpolation. Slovakia (nochmal checken) only reported weekly values, a reasonable interpolation was however possible. The donor pool then consists of six countries: Bulgaria, Czechia, Estonia, Latvia, Slovakia and Slovenia. 

There are however missing values for several countries. Sometimes these missing values follow a specific pattern (e.g. Poland: values are missing on Sundays) while there is no specific pattern for some other countries. Linear interpolation is used to replace the missing values, by drawing a straight line between the two adjacent data points (citation here). Other imputation techniques such as spline interpolation\footnote{Spline interpolation estimates missing values such that the curvature of the time series is minimized (need citation here).} were also considered. A last observation carried forward (LOCF) or a mean imputation do not make any sense in the setting of a vaccination rate, an increasing function. The differences between linear and spline interpolation are relatively minor in this specific application.

\begin{table}[! htbp]\centering \caption{Predictors of selected countries}
\label{table:summarystat}
\begin{threeparttable}
\begin{tabular}{l c c c}
\toprule\midrule
 & \thead{Poland}
 & \thead{Synthetic Poland} & \thead{Mean donor}\\ \midrule
GDP per capita\tnote{a} & $12,810$ & $15,642.287$ & $14,428.333$ \\ 
Influenza vaccination rate\tnote{b} & $0.104$ & $0.133$ & $0.139$ \\ 
Population density\tnote{c} & $123.600$ & $87.871$ & $79.667$ \\ 
Share with tertiary education\tnote{d} & $0.289$ & $0.283$ & $0.286$ \\
Share of elderly\tnote{d} & $0.182$ & $0.185$ & $0.198$ \\ 
Trust in science\tnote{e} & $0.872$ & $0.895$ & $0.891$ \\ 
\bottomrule
\end{tabular}
\begin{tablenotes}\footnotesize
\item[a] in USD, 2020 (Eurostat)
\item[b] among elderly (over 64), 2019 (Eurostat)
\item[c] in persons per \(\text{km}^{2}\), 2019 (Eurostat)
\item[d] over 64 years, 2020 (Eurostat)
\item[e] 15 to 64 years, 2020 (Eurostat)
\item[f] 2020 (Wellcome Global Monitor)
\end{tablenotes}
\end{threeparttable}
\label{table2}
\end{table}

In order to find the best fit for the weights, additional predictors are used. The choice of these variables can be very important for the synthetic control. GDP per capita, the share of elderly (over 65), the share of people (15-64) with tertiary education, population density and the year of entry into the EU all adjust for general country specific differences, but partly also for differences in vaccine uptake. Income, age, education and the proximity to the nearest vaccination center (it is assumed that countries with higher population density have - on average - a closer proximity to vaccination centers) are all relevant determinants of COVID-19 vaccine uptake (\cite{viswanath_individual_2021}; need to check + possibly additional citation). The share of elderly vaccinated against Influenza and trust in science are possibly also important indicators of "vaccine openness". We would expect countries with higher Influenza vaccination rates (before the spread of COVID-19) also to have higher COVID-19 vaccination rates, since the population might generally be more open to the basic idea of vaccinations and that there might be a more sophisticated culture of health prevention (too unspecific). A similar reasoning applies to trust in science. When citizens generally place more confidence in scientists, they would also be more likely to be open to the idea of vaccinations. 

\begin{table}[! htbp]\centering \caption{Composition of synthetic Poland}
\label{table:weightssynth}
\begin{threeparttable}
\begin{tabular}{l c c c c c c c c c c}
\toprule\midrule
\thead{Country} & & & & & & & & & & \thead{Weight}\\ \midrule
Bulgaria & & & & & & & & & & 0.001 \\ 
Czechia & & & & & & & & & & - \\
Estonia & & & & & & & & & & - \\
Latvia & & & & & & & & & & 0.269 \\ 
Slovenia & & & & & & & & & & 0.248 \\ 
Slovakia & & & & & & & & & & 0.482 \\  
\bottomrule\addlinespace[1ex]
\end{tabular}
\end{threeparttable}
\label{table2}
\end{table}


Ideally, the use of a "political variable" would have been a good idea, since large differences in vaccine uptake exist across party preferences. This problem might be the most well-known in the US, but it also applies to other countries (citation here). When using other countries as a donor pool, it is however very difficult because of the large differences of party ideologies between countries. One idea would be to use the vote share for parties along the European parties/groups as in the European Parliament, firstly there are however quite large differences between parties within certain groups and secondly, elections and surveys are very volatile in many European countries compared to e.g. some US states (if left, need citations). Also talk about trust in government here.




\noindent The data analysis has been carried out in R using the \textit{tidysynth} and \textit{SCtools} packages, generating synthetic Poland. Table 3.1 shows descriptive statistics of the predictors of Poland, synthetic Poland and the donor pool mean of the predictors. Table 3.2 presents the composition of synthetic Poland for the analysis of the share of fully vaccinated citizens with the respective unit weights. The data and R scripts can be found in the corresponding \href{https://github.com/benediktstelter/bachelor_thesis.git}{GitHub repository \ExternalLink}\footnote{See appendix for further information} \hspace{-0.1cm}.



\chapter{Results}

First of all, let us look at vaccination rates in Poland from a descriptive point of view. Figure 4.1 plots the vaccination rate (fully vaccinated) in Poland in 2021. 
\begin{figure}[h]
\caption{Share of population fully vaccinated in Poland (in \%)}
```{r fig.asp = 0.45, fig.showtext=TRUE, fig.width = 5.8    , echo=FALSE, message=FALSE, warning=FALSE, fig.align='center'}
library(showtext)
font_add(family = "Latin Modern Roman 10", regular = "lmroman10-regular-webfont.ttf")
showtext_auto()


poland.plot$twodoses <- poland.plot$twodoses*100
Pol_desc_plot <- ggplot(poland.plot,aes(y=twodoses,x=date,group=1,linetype="solid")
  )+ geom_line(size=1, colour="#527ca4") + 
  geom_vline(xintercept=2021-05-25,color="red",linetype=2,size=1.1) + 
  geom_vline(xintercept=2021-09-30,color="red",linetype=2,size=1.1) + 
  xlab(expression(bold(paste("Date in 2021")))) +  
  zew_plotstyle() + theme(legend.position = "none", axis.title.y = element_blank())+
  scale_x_date(expand = c(0, 0))

Pol_desc_plot


```
\end{figure}

\noindent As other countries, Poland first dealt with a shortage of vaccines, leading to necessary rationing, having to favor older and chronically ill citizens first. Towards the summer, this shortage significantly loosened its grip. Although the growth rate in the vaccination rate increased significantly, for countries like Poland with a comparably high vaccine hesitancy, the problem turned from a vaccine shortage to a shortage of people willing to get vaccinated. Simply from looking at figure 4.1, we can not observe a sharp or outstanding change in the growth rate at the time of announcement or shortly after\footnote{We would expect that the it takes several weeks for any significant change to be visible, since getting fully vaccinated takes/took around six to eight weeks}. This is however also not expected, since the magnitude of the effect of lotteries on vaccination rates is generally not very large, as outlined in section 2.1. 


\begin{figure}[h]
\caption{Vaccination rates (fully vaccinated) and the gap between Poland and synthetic Poland}
```{r fig.asp = 0.45, fig.showtext=TRUE, fig.width = 5.8, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center'}
synth_data_out = data.frame(dataprep.out$Y0plot%*%synth.out$solution.w) 
date = as.numeric(row.names(synth_data_out))
plot.df = data.frame(twodoses=poland_lottery$twodoses[poland_lottery$countryid==10 & poland_lottery$date2 %in% date])
plot.df$synth = synth_data_out$w.weight
plot.df$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]


SCM_plot <- ggplot(plot.df,aes(y=twodoses,x=date,color="Poland")) + geom_line(linetype="solid",size=0.8) + 
  geom_line(aes(y=synth,x=date,color="Synthetic Poland"),linetype="solid",size=0.8) +
  geom_vline(xintercept=18772,color="black",linetype=2,size=1) + 
  geom_vline(xintercept=18900,color="black",linetype=2,size=1) + 
  xlab(expression(bold(paste("Date in 2021")))) +  
  ylab(expression(bold(paste("Share of Population fully vaccinated (in %)")))) + 
  scale_color_manual(name="Countries",values=c("Poland"="#527ca4","Synthetic Poland"="#b4be28")) +
  zew_plotstyle() +
  theme(legend.position = c(0.85, 0.45),
        legend.background = element_rect(fill = "white", color = "black", size = 1),
        axis.title.y = element_blank(),axis.title.x = element_blank())
SCM_plot


gap <- dataprep.out$Y1plot - (dataprep.out$Y0plot %*% synth.out$solution.w)
plotgap.df = data.frame(gap)
plotgap.df$date <- poland_lottery$date[poland_lottery$countryid==10 & poland_lottery$date2 %in% date]


Pol_gap_plot <- ggplot(plotgap.df,aes(y=gap,x=date,group=1,linetype="solid")
)+ geom_line(size=0.8, colour="#9c2424") + zew_plotstyle() + ylim(-0.08, 0.08) +
  xlab(expression(bold(paste("Date in 2021")))) +  
  geom_hline(yintercept = 0, color = "black", size = 1) + 
  theme(axis.line.x = element_line(colour = "grey70", size = 0.2, linetype = 3),
        legend.position = "none", axis.title.y = element_blank()) +
  labs(caption = "The two dashed lines refer to the announcement (25/05) and the end (30/09) of the lottery.") +
  geom_vline(xintercept=18772,color="black",linetype=2,size=1) + 
  geom_vline(xintercept=18900,color="black",linetype=2,size=1)

Pol_gap_plot

```
\end{figure}


We therefore applied the synthetic control method, as described in section 3.2. Figure 4.2 plots the vaccination rate (fully vaccinated) for both Poland and synthetic Poland. We observe a solid, but not perfect pre-treatment fit (too unspecific). From the intervention, we can see a slow decoupling between Poland and its synthetic control. This difference continues increase to around 5 percentage points. As time progresses, the gap however tends to decrease again, and by the end of November (after the end of the lottery), the vaccination rates of Poland and synthetic Poland are back to the same level. Simply based on the plot, one interpretation could be that the lottery successfully induces some people who would have gotten vaccinated anyway to do this earlier, to take advantage of the incentive provided by the government. It however also suggests that the vaccine lottery was not particularly effective in reaching new people. It has to be noted that the more time has passed since the intervention, the synthetic control becomes more unreliable, as the prediction intervals in figure ... show. Therefore, the development in October and November should be interpreted with caution, but at first glance, it seems like the lottery was not successful in getting more people vaccinated, but only in getting people vaccinated earlier. 

Employing the permutation based inference techniques discussed in section 4.1, also shows no signs of a significant effect. Figure ... presents the placebo study. As can be seen, the magnitude of the effect of Poland is not comparably high and does not stand out. This finding also confirmed quantitatively. Using the discussed test procedure, a p-value of around 0.5 is obtained. Therefore, the hypothesis that the lottery had no effect in increasing vaccination rates cannot be rejected, at any known/relevant significance level. The findings of the permutation based inference are therefore in line with the prediction intervals and do not suggest a statistically significant effect of the lottery on vaccination rates (fully vaccinated). 

\begin{figure}[h]
\caption{Placebo plot: Poland and control countries}
```{r fig.asp = 0.6, fig.showtext=TRUE, fig.width = 5.8, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center'}

p.gaps <- ggplot(df.plot,mapping=aes(x=date, y=gap))+
geom_line(mapping=aes(group=id, color='2'),size=0.8)+
geom_line(plotgap.df, mapping = aes(color='1'),size=0.8)+ 
geom_hline(yintercept = 0, color = "black", size = 1) + 
geom_vline(xintercept=18772,color="black",linetype=2,size=1) + 
geom_vline(xintercept=18900,color="black",linetype=2,size=1) + 
ylim(-0.5, 0.3) +
xlab(expression(bold(paste("Date in 2021")))) +
scale_color_manual(name="Countries",
                   values = c( '1' = '#9c2424', '2' = '#c7a92f'),
                   labels = c(tdf$treated.name, 'Controls')) +
zew_plotstyle() + theme(axis.title.y = element_blank(),
                        axis.line.x = element_line(colour = "grey70", size = 0.2, linetype = 3),
                        legend.position = c(0.15, 0.25),
                        legend.background = element_rect(fill = "white", color = "black", size = 1),) +
  labs(caption = "The figure shows the gaps between the actual and synthetic units for Poland as well as all of the control \n units. The synthetic controls of the control units are placebos (constructed as if there was a treatment).")


p.gaps

```
\end{figure}

\subsection*{Robustness checks}


Next, we will assess the robustness of our synthetic control. One option is to change the time of the intervention. As discussed earlier, there are two possible intervention points: The announcement and the start of the lottery, with the announcement being the more sensible option. In order to see how robust our synthetic control is, we will no use July 1, the start of the lottery as the intervention point. As can be seen from the upper panel of figure 4.4, changing the time of intervention from 25/05/2021 to 01/07/2021 has no visible effect on the synthetic control, with only very minor changes in the chosen weights. Importantly, the lag after the announcement of the lottery is clearly visible with both of these setups, with no lag after July 1.

\begin{figure}[h]
\caption{Poland and synthetic Poland with different intervention times}
```{r fig.asp = 0.45, fig.showtext=TRUE, fig.width = 5.8, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center'}
SCM_plot.tc <- ggplot(plot.df.tc,aes(y=twodoses,x=date,color="Poland")) + geom_line(linetype="solid",size=0.8) + 
  geom_line(aes(y=synth,x=date,color="Synthetic Poland"),linetype="solid",size=0.8) +
  geom_vline(xintercept=18808,color="black",linetype=2,size=1) + 
  geom_vline(xintercept=18900,color="black",linetype=2,size=1) + 
  xlab(expression(bold(paste("Date in 2021")))) +  
  ylab(expression(bold(paste("Share of Population fully vaccinated (in %)")))) + 
  scale_color_manual(name="Countries",values=c("Poland"="#527ca4","Synthetic Poland"="#b4be28")) +
  zew_plotstyle() +
  theme(legend.position = c(0.85, 0.45),
        legend.background = element_rect(fill = "white", color = "black", size = 1),
        axis.title.y = element_blank(),axis.title.x = element_blank()) +
  annotate(geom="text", x=as.Date("2021-04-01"), y=0.4, label="The time of intervention is \nchanged to July 1",
           color="black", family= "Latin Modern Roman 10") +
  annotate("segment", x = as.Date("2021-05-31"), xend = as.Date("2021-06-25"), y = 0.4, 
           yend = 0.4, colour = "black", size = 0.2, arrow = arrow(angle = 25, 
           length = unit(.25,"cm")))
SCM_plot.tc

SCM_plot.tcb <- ggplot(plot.df.tcb,aes(y=twodoses,x=date,color="Poland")) + geom_line(linetype="solid",size=0.8) + 
  geom_line(aes(y=synth,x=date,color="Synthetic Poland"),linetype="solid",size=0.8) +
  geom_vline(xintercept=18741,color="black",linetype=2,size=1) + 
  geom_vline(xintercept=18900,color="black",linetype=2,size=1) + 
  xlab(expression(bold(paste("Date in 2021")))) +  
  ylab(expression(bold(paste("Share of Population fully vaccinated (in %)")))) + 
  scale_color_manual(name="Countries",values=c("Poland"="#527ca4","Synthetic Poland"="#b4be28")) +
  zew_plotstyle() +
  theme(legend.position = 'none',
        legend.background = element_rect(fill = "white", color = "black", size = 1),
        axis.title.y = element_blank()) +
  annotate(geom="text", x=as.Date("2021-08-01"), y=0.1, label="The time of intervention is \nchanged to April 25",
           color="black", family= "Latin Modern Roman 10") +
  annotate("segment", x = as.Date("2021-05-31"), xend = as.Date("2021-04-29"), y = 0.1, 
           yend = 0.1, colour = "black", size = 0.2, arrow = arrow(angle = 25, 
                                                                   length = unit(.25,"cm")))
SCM_plot.tcb

```
\end{figure}

Another way of changing the time of intervention is backdating, meaning that the synthetic control is estimated using an arbitrary earlier intervention time. If the synthetic control is robust, we expect no drastic changes from the baseline result in figure 4.1. We therefore construct a new synthetic control, with a "fictional" intervention time one month earlier (April 25) than the actual investigation time. As observable in the lower panel of figure 4.4, the changes are also not too large, with the new synthetic control still tracking the path of actual Poland until the actual intervention occurs relatively well. We therefore conclude that this synthetic control is indeed robust to changes to the time of intervention. This finding also confirms that we do not suffer from an anticipation effect.


Another possible robustness check is to leave out certain predictors or countries. With a relatively low number of predictors and donor pool countries, the effects of such a robustness check could potentially be larger in this setting. Figure 4.5 presents the result of a leave-one-out analysis of synthetic poland, leaving out all of predictors once, while keeping the others in. The synthetic control is not very robust, with predictors being especially important to the robustness of the synthetic control, while the three other predictors only take on a minor weight and therefore are not as important to the robustness of the synthetic control. Overall, the result is not surprising, since only a total of 6 predictors are used.


\begin{figure}[h]
\caption{Leave-one-out synthetic controls of Poland}
```{r fig.asp = 0.45, fig.showtext=TRUE, fig.width = 5.8, echo=FALSE, message=FALSE, warning=FALSE, fig.align='center'}
loo.plot <- ggplot(plot.df,mapping=aes(x=date, y=twodoses,color="Poland"))+geom_line(linetype="solid",size=0.8) +
  geom_line(plot.df.gdp, mapping=aes(x=date,y=synth,color='Leave-one-out'),size=0.6)+
  geom_line(plot.df.infz, mapping=aes(x=date,y=synth,color='Leave-one-out'),size=0.6)+
  geom_line(plot.df.pop, mapping=aes(x=date,y=synth,color='Leave-one-out'),size=0.6)+
  geom_line(plot.df.tert, mapping=aes(x=date,y=synth,color='Leave-one-out'),size=0.6)+
  geom_line(plot.df.eld, mapping=aes(x=date,y=synth,color='Leave-one-out'),size=0.6)+
  geom_line(plot.df.trst, mapping=aes(x=date,y=synth,color='Leave-one-out'),size=0.6)+
  geom_line(aes(y=synth,x=date,color="Synthetic Poland"),linetype="solid",size=0.8) +
  geom_vline(xintercept=18772,color="black",linetype=2,size=1) + 
  geom_vline(xintercept=18900,color="black",linetype=2,size=1) + 
  xlab(expression(bold(paste("Date in 2021")))) +
  scale_color_manual(name="Countries",
                     values = c( "Poland" = "#527ca4" , "Synthetic Poland"="#b4be28",
                                 "Leave-one-out" = 'grey')) +
  zew_plotstyle() + theme(axis.title.y = element_blank(),
                          legend.position = c(0.85, 0.35),
                          legend.background = element_rect(fill = "white", color = "black", size = 1),)

loo.plot
```
\end{figure}


\chapter{Discussion}


\chapter{Conclusion}

 





